<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zdinit.icecream.sys.mapper.TResourceMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.zdinit.icecream.sys.entity.TResource">
        <id column="ID" property="id" />
        <result column="R_NAME" property="rName" />
        <result column="R_DESC" property="rDesc" />
        <result column="R_CODE" property="rCode" />
        <result column="R_TYPE" property="rType" />
        <result column="R_ORDER" property="rOrder" />
        <result column="R_ACTION" property="rAction" />
        <result column="R_URL" property="rUrl" />
        <result column="R_PID" property="rPid" />
        <result column="R_ICONCSS" property="rIconcss" />
        <result column="SHOW_NAME" property="showName" />
        <result column="ROOT_ID" property="rootId" />
        <result column="IS_SHOW" property="isShow" />
        <result column="R_SORT" property="rSort" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        ID, R_NAME, R_DESC, R_CODE, R_TYPE, R_ORDER, R_ACTION, R_URL, R_PID, R_ICONCSS, SHOW_NAME, ROOT_ID, IS_SHOW, R_SORT
    </sql>


    <select id="listResourceByUserId" resultType="com.zdinit.icecream.sys.entity.TResource" parameterType="string">
        SELECT * from t_role r,t_user_role ur,t_user u,t_role_resource rr,t_resource tr
        where ur.USERID=u.ID
        AND ur.ROLEID = r.ID
        AND rr.ROLEID = r.ID
        AND rr.RESOURCEID = tr.ID
        AND u.ID= #{id,jdbcType=VARCHAR}
    </select>

</mapper>
